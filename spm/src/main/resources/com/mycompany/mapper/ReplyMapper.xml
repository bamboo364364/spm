<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.mycompany.mapper.ReplyMapper">
	
	
	<!-- 리플페이징 -->
	<select id="replyList" resultType="com.mycompany.model.ReplyDTO">
	select* from(
	 select rownum rn, replyId, goodId, memberMail, regDate, replyContent, rating, relevel 
	 from spm_reply
	 where goodId= #{goodId} and rownum
	 <![CDATA[ <= ]]>  #{pageNum}*#{amount} ) where rn  <![CDATA[ >  ]]>
	 (#{pageNum}-1)*#{amount}  
	</select>
	
	<!-- 리플등록 -->
	<insert id="replyEnroll">
	insert into spm_reply(replyId, goodId,
	memberMail, regDate, replyContent, rating, relevel)
	values(spm_reply_seq.nextval, #{goodId}, #{memberMail}, sysdate, #{replyContent},
	#{rating}, #{relevel})
	</insert>
	
	<!-- 리플수정 -->
	<update id="replyModify">
	update spm_reply set
    replyContent= #{replyContent}, rating= #{rating}
     where replyId= #{replyId}
	</update>
	
	

  </mapper>